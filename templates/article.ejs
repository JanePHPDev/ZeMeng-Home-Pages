<%- include('partials/header', {code_highlight: true}) -%>

<div class="container" style="padding-top:100px;">
  <div class="row justify-content-center">
    <div class="col-13">
      <article class="rounded">
        <header class="mb-4">
          <h1 class="mb-3"><%= post.title %></h1>
          <div class="text-muted mb-3">
            <span><i class="fa fa-calendar"></i> <%= formatDate(post.date) %></span>
            <% if (post.categories) { %>
              <span class="ms-3"><i class="fa fa-folder"></i> <%= post.categories %></span>
            <% } %>
            <% if (post.tags && post.tags.length > 0) { %>
              <span class="ms-3">
                <i class="fa fa-tags"></i>
                <% post.tags.forEach(tag => { %>
                  <span class="badge bg-secondary me-1"><%= tag %></span>
                <% }) %>
              </span>
            <% } %>
          </div>
        </header>
        
        <div class="post-content">
          <%- post.content %>
        </div>
        
<footer class="mt-5 pt-4 border-top text-center">
  <div class="author-info bg-light p-4 rounded d-inline-block text-start">
    <div class="d-flex align-items-center">
      <img src="<%= site.avatar %>" class="rounded-circle me-3"
           style="width:60px;height:60px;object-fit:cover;" alt="avatar">
      <div>
        <h5 class="mb-1"><%= site.author %></h5>
        <p class="text-muted mb-0"><%= site.description %></p>
      </div>
    </div>
  </div>
</footer>

      </article>
      
<nav class="mt-4 position-relative" style="min-height: 80px;">
  <% const currentIndex = posts.findIndex(p => p.fileName === post.fileName) %>
  <% if (currentIndex > 0) { %>
    <a href="<%= posts[currentIndex - 1].url %>"
       class="btn btn-outline-primary position-absolute top-0 start-0 text-truncate d-inline-block"
       style="max-width: 46%; white-space: nowrap;">
      <i class="fa fa-arrow-left"></i> 上一篇：<%= posts[currentIndex - 1].title %>
    </a>
  <% } %>
  <% if (currentIndex < posts.length - 1) { %>
    <a href="<%= posts[currentIndex + 1].url %>"
       class="btn btn-outline-primary position-absolute bottom-0 end-0 text-truncate d-inline-block"
       style="max-width: 46%; white-space: nowrap;">
      下一篇：<%= posts[currentIndex + 1].title %> <i class="fa fa-arrow-right"></i>
    </a>
  <% } %>
</nav>
    </div>
  </div>
</div>

<%- include('partials/footer') -%>